(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();var O=1e-6,w=typeof Float32Array<"u"?Float32Array:Array,_e=Math.PI/180;function _(e){return e*_e}Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function Fe(){var e=new w(9);return w!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function X(){var e=new w(16);return w!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ue(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ye(e,r,i){var t=r[0],n=r[1],o=r[2],a=r[3],s=r[4],c=r[5],f=r[6],l=r[7],d=r[8],h=r[9],u=r[10],R=r[11],A=r[12],M=r[13],U=r[14],y=r[15],T=i[0],m=i[1],v=i[2],E=i[3];return e[0]=T*t+m*s+v*d+E*A,e[1]=T*n+m*c+v*h+E*M,e[2]=T*o+m*f+v*u+E*U,e[3]=T*a+m*l+v*R+E*y,T=i[4],m=i[5],v=i[6],E=i[7],e[4]=T*t+m*s+v*d+E*A,e[5]=T*n+m*c+v*h+E*M,e[6]=T*o+m*f+v*u+E*U,e[7]=T*a+m*l+v*R+E*y,T=i[8],m=i[9],v=i[10],E=i[11],e[8]=T*t+m*s+v*d+E*A,e[9]=T*n+m*c+v*h+E*M,e[10]=T*o+m*f+v*u+E*U,e[11]=T*a+m*l+v*R+E*y,T=i[12],m=i[13],v=i[14],E=i[15],e[12]=T*t+m*s+v*d+E*A,e[13]=T*n+m*c+v*h+E*M,e[14]=T*o+m*f+v*u+E*U,e[15]=T*a+m*l+v*R+E*y,e}function Pe(e,r,i,t){var n=r[0],o=r[1],a=r[2],s=r[3],c=n+n,f=o+o,l=a+a,d=n*c,h=n*f,u=n*l,R=o*f,A=o*l,M=a*l,U=s*c,y=s*f,T=s*l,m=t[0],v=t[1],E=t[2];return e[0]=(1-(R+M))*m,e[1]=(h+T)*m,e[2]=(u-y)*m,e[3]=0,e[4]=(h-T)*v,e[5]=(1-(d+M))*v,e[6]=(A+U)*v,e[7]=0,e[8]=(u+y)*E,e[9]=(A-U)*E,e[10]=(1-(d+R))*E,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function be(e,r,i,t,n){var o=1/Math.tan(r/2),a;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(t-n),e[10]=(n+t)*a,e[14]=2*n*t*a):(e[10]=-1,e[14]=-2*t),e}var we=be;function Se(e,r,i,t){var n,o,a,s,c,f,l,d,h,u,R=r[0],A=r[1],M=r[2],U=t[0],y=t[1],T=t[2],m=i[0],v=i[1],E=i[2];return Math.abs(R-m)<O&&Math.abs(A-v)<O&&Math.abs(M-E)<O?Ue(e):(l=R-m,d=A-v,h=M-E,u=1/Math.hypot(l,d,h),l*=u,d*=u,h*=u,n=y*h-T*d,o=T*l-U*h,a=U*d-y*l,u=Math.hypot(n,o,a),u?(u=1/u,n*=u,o*=u,a*=u):(n=0,o=0,a=0),s=d*a-h*o,c=h*n-l*a,f=l*o-d*n,u=Math.hypot(s,c,f),u?(u=1/u,s*=u,c*=u,f*=u):(s=0,c=0,f=0),e[0]=n,e[1]=s,e[2]=l,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=a,e[9]=f,e[10]=h,e[11]=0,e[12]=-(n*R+o*A+a*M),e[13]=-(s*R+c*A+f*M),e[14]=-(l*R+d*A+h*M),e[15]=1,e)}function ee(){var e=new w(3);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Le(e){var r=e[0],i=e[1],t=e[2];return Math.hypot(r,i,t)}function F(e,r,i){var t=new w(3);return t[0]=e,t[1]=r,t[2]=i,t}function ge(e,r,i,t){return e[0]=r,e[1]=i,e[2]=t,e}function Be(e,r){var i=r[0],t=r[1],n=r[2],o=i*i+t*t+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=r[0]*o,e[1]=r[1]*o,e[2]=r[2]*o,e}function Ve(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function q(e,r,i){var t=r[0],n=r[1],o=r[2],a=i[0],s=i[1],c=i[2];return e[0]=n*c-o*s,e[1]=o*a-t*c,e[2]=t*s-n*a,e}var Ce=Le;(function(){var e=ee();return function(r,i,t,n,o,a){var s,c;for(i||(i=3),t||(t=0),n?c=Math.min(n*i+t,r.length):c=r.length,s=t;s<c;s+=i)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],o(e,e,a),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2];return r}})();function De(){var e=new w(4);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ne(e,r){var i=r[0],t=r[1],n=r[2],o=r[3],a=i*i+t*t+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=i*a,e[1]=t*a,e[2]=n*a,e[3]=o*a,e}(function(){var e=De();return function(r,i,t,n,o,a){var s,c;for(i||(i=4),t||(t=0),n?c=Math.min(n*i+t,r.length):c=r.length,s=t;s<c;s+=i)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],e[3]=r[s+3],o(e,e,a),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2],r[s+3]=e[3];return r}})();function Q(){var e=new w(4);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ee(e,r,i){i=i*.5;var t=Math.sin(i);return e[0]=t*r[0],e[1]=t*r[1],e[2]=t*r[2],e[3]=Math.cos(i),e}function W(e,r,i,t){var n=r[0],o=r[1],a=r[2],s=r[3],c=i[0],f=i[1],l=i[2],d=i[3],h,u,R,A,M;return u=n*c+o*f+a*l+s*d,u<0&&(u=-u,c=-c,f=-f,l=-l,d=-d),1-u>O?(h=Math.acos(u),R=Math.sin(h),A=Math.sin((1-t)*h)/R,M=Math.sin(t*h)/R):(A=1-t,M=t),e[0]=A*n+M*c,e[1]=A*o+M*f,e[2]=A*a+M*l,e[3]=A*s+M*d,e}function Ie(e,r){var i=r[0]+r[4]+r[8],t;if(i>0)t=Math.sqrt(i+1),e[3]=.5*t,t=.5/t,e[0]=(r[5]-r[7])*t,e[1]=(r[6]-r[2])*t,e[2]=(r[1]-r[3])*t;else{var n=0;r[4]>r[0]&&(n=1),r[8]>r[n*3+n]&&(n=2);var o=(n+1)%3,a=(n+2)%3;t=Math.sqrt(r[n*3+n]-r[o*3+o]-r[a*3+a]+1),e[n]=.5*t,t=.5/t,e[3]=(r[o*3+a]-r[a*3+o])*t,e[o]=(r[o*3+n]+r[n*3+o])*t,e[a]=(r[a*3+n]+r[n*3+a])*t}return e}var pe=Ne;(function(){var e=ee(),r=F(1,0,0),i=F(0,1,0);return function(t,n,o){var a=Ve(n,o);return a<-.999999?(q(e,r,n),Ce(e)<1e-6&&q(e,i,n),Be(e,e),Ee(t,e,Math.PI),t):a>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(q(e,n,o),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1+a,pe(t,t))}})();(function(){var e=Q(),r=Q();return function(i,t,n,o,a,s){return W(e,t,a,s),W(r,n,o,s),W(i,e,r,2*s*(1-s)),i}})();(function(){var e=Fe();return function(r,i,t,n){return e[0]=t[0],e[3]=t[1],e[6]=t[2],e[1]=n[0],e[4]=n[1],e[7]=n[2],e[2]=-i[0],e[5]=-i[1],e[8]=-i[2],pe(r,Ie(r,e))}})();function x(e){console.error(e);const r=document.getElementById("error-box");if(!r)return;const i=document.createElement("p");i.innerText=e,r.append(i)}function Oe(e,r){const i=e.createBuffer();if(!i){x("Couldn't allocate buffer");return}return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),i}function Xe(e,r){const i=e.createBuffer();return i||x("Couldn't allocate buffer"),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),i}function J(e,r,i){const t=e.createShader(e.VERTEX_SHADER),n=e.createShader(e.FRAGMENT_SHADER),o=e.createProgram();if(t===null)return x("Memory for vertex shader couldn't be allocated"),null;if(n===null)return x("Memory for fragment shader couldn't be allocated"),null;if(o===null)return x("Memory for shader program couldn't be allocated"),null;if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS)){const a=e.getShaderInfoLog(t);x(`${a}`)}if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const a=e.getShaderInfoLog(n);x(`${a}`)}if(e.attachShader(o,t),e.attachShader(o,n),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){const a=e.getProgramInfoLog(o);return x(`Failed to link program: ${a}`),null}return o}function Ye(e,r){const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const t=0,n=e.RGBA,o=1,a=1,s=0,c=e.RGBA,f=e.UNSIGNED_BYTE,l=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,t,n,o,a,s,c,f,l);const d=new Image;return d.onload=()=>{e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,t,n,c,f,d),fe(d.width)&&fe(d.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},d.src=r,i}function ze(e){const r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null);const i=r.status===200?r.responseText:null;return i||null}function fe(e){return(e&e-1)===0}function Ge(e){const r=new XMLHttpRequest,i=[],t=[];r.open("GET",e,!1),r.send(null);const n=r.status===200?r.responseText:null;if(!n)return null;const o=n.split(`
`);for(let a=0;a<o.length;a++){if(o[a][0]=="v"){const s=o[a].slice(2).split(" "),c=[];s.forEach(f=>c.push(parseFloat(f))),i.push(c[0],c[1],c[2],c[0],c[1],c[2])}o[a][0]=="f"&&o[a].slice(2).split(" ").forEach(c=>t.push(parseInt(c)-1))}return[new Float32Array(i),new Uint16Array(t)]}function $e(e){const r=new XMLHttpRequest,i=[],t=[];r.open("GET",e,!1),r.send(null);const n=r.status===200?r.responseText:null;if(!n)return null;const o=[],a=[],s=n.split(`
`);for(let c=0;c<s.length;c++){if(s[c][0]=="v"&&s[c][0]!="t"){const f=s[c].slice(2).split(" ");o.push(f.map(l=>parseFloat(l)))}if(s[c][0]=="v"&&s[c][1]=="t"){const f=s[c].slice(3).split(" ");a.push(f.map(l=>parseFloat(l)))}if(s[c][0]=="f"){const f=s[c].slice(2).split(" "),l=parseFloat(f[0].split("/")[0])-1,d=parseFloat(f[1].split("/")[0])-1,h=parseFloat(f[2].split("/")[0])-1;t.push(l,d,h),i.push(...o[l],...a[l]),i.push(...o[d],...a[d]),i.push(...o[h],...a[h])}}return[new Float32Array(i),new Uint16Array(t)]}function de(e,r,i,t,n){const o=e.createVertexArray();return o?(e.bindVertexArray(o),e.enableVertexAttribArray(t),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(t,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),o):(x("Failed to create 3d POS COL Vao"),null)}const C=365.25638,je=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec3 vertexColor;
out vec3 fragmentColor;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentColor = vertexColor;

    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}
`,He=`#version 300 es
precision mediump float;

uniform vec3 aColor;

in vec3 fragmentColor;
out vec4 oColor;

void main() {
    oColor = vec4(aColor, 1.0);
}
`,qe=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec3 vertexColor;
out vec3 fragmentColor;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentColor = vertexColor;
    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}
`,We=`#version 300 es
precision mediump float;

uniform float uId;
in vec3 fragmentColor;

out vec4 oColor;

void main() {
    oColor = vec4(uId,1.0,1.0,1.0);
}
`,Je=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec2 vertexUV;
out vec2 fragmentUV;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentUV = vertexUV;

    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}
`,ke=`#version 300 es
precision mediump float;

uniform sampler2D oTexture;

in vec2 fragmentUV;
out vec4 oColor;

void main() {
    oColor = texture(oTexture, fragmentUV);
}
`,ue=.001,k=1;let K=-1,he=-1,me=-1,ve=-1,D=200,Z=0;class g{constructor(r,i,t,n,o,a,s,c,f,l,d,h,u,R){this.id=r,this.name=i,this.scale=t,this.rotationAxis=n,this.rotationAngle=o,this.color=a,this.vao=s,this.pickVao=c,this.numIndices=f,this.eccentricity=l,this.semiMajorAxis=d,this.period=h,this.longitudeAscendingNode=u,this.inclination=R,this.modelMat=X(),this.scaleVec=ee(),this.rotation=Q(),this.semiMinorAxis=d*Math.sqrt(1-l*l),this.focusDistance=Math.sqrt(d**2-this.semiMinorAxis**2),this.centerX=0,this.centerY=this.focusDistance/2}draw(r,i,t,n){this.rotationAngle+=i/5,Ee(this.rotation,this.rotationAxis,this.rotationAngle),ge(this.scaleVec,this.scale,this.scale,this.scale);let o=this.centerX+this.semiMinorAxis*Math.cos(performance.now()*ue/this.period),a=this.centerY+this.semiMajorAxis*Math.sin(performance.now()*ue/this.period),s=o*Math.cos(this.longitudeAscendingNode)-a*Math.sin(this.longitudeAscendingNode),c=0,f=o*Math.sin(this.longitudeAscendingNode)+a*Math.cos(this.longitudeAscendingNode),l=s,d=c*Math.cos(this.inclination)-f*Math.sin(this.inclination),h=f*Math.cos(this.inclination)+c*Math.sin(this.inclination);Pe(this.modelMat,this.rotation,F(l*k,d*k,h*k),this.scaleVec),r.uniformMatrix4fv(t,!1,this.modelMat),r.uniform3fv(n,this.color),r.bindVertexArray(this.vao),r.drawElements(r.TRIANGLES,this.numIndices,r.UNSIGNED_SHORT,0),r.bindVertexArray(null)}pickDraw(r,i,t){r.uniformMatrix4fv(i,!1,this.modelMat),r.uniform1f(t,this.id),r.bindVertexArray(this.pickVao),r.drawElements(r.TRIANGLES,this.numIndices,r.UNSIGNED_SHORT,0),r.bindVertexArray(null)}}function Ke(){const e=document.getElementById("canvas");if(!e||!(e instanceof HTMLCanvasElement)){x("Invalid canvas");return}e.addEventListener("mousemove",p=>{if(!r)return;const L=e.getBoundingClientRect();K-p.screenX,K=p.clientX-L.left,he=p.clientY-L.top}),e.addEventListener("wheel",p=>{r&&(p.deltaY>0?D*=1.1:p.deltaY<0&&(D/=1.1),D=Math.max(20,D),D=Math.min(560,D))});const r=e.getContext("webgl2");if(!r){x("Couldnt get access webgl2");return}const i=Ge("/sol.obj");if(!i)return;const[t,n]=i;if(!$e("./sol.obj"))return;if(!Ye(r,"/sun.png")){x("Sun texture couldnt be loaded");return}r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.bindTexture(r.TEXTURE_2D,null);const s=Oe(r,t),c=Xe(r,n);if(!c||!s){x("Sphere indices or Sphere vertices couldnt be made");return}const f=J(r,je,He);if(!f){x("Program");return}const l=J(r,Je,ke);if(!l){x("Program");return}const d=J(r,qe,We);if(!d){x("Program");return}const h=r.getAttribLocation(f,"vertexPos"),u=r.getAttribLocation(f,"vertexColor"),R=r.getUniformLocation(f,"modelMat"),A=r.getUniformLocation(f,"projViewMat"),M=r.getUniformLocation(f,"aColor");if(h<0||u<0||!R||!A||!M){x("Error loading Pos Color attributes");return}const U=r.getAttribLocation(l,"vertexPos"),y=r.getAttribLocation(l,"vertexUV"),T=r.getUniformLocation(l,"modelMat"),m=r.getUniformLocation(l,"projViewMat"),v=r.getUniformLocation(l,"oTexture");if(U<0||y<0||!T||!m||!v){x(`Error loading Pos UV attributes: pos(${U}) uv(${y}) modelMat(${!!T}) projViewMat(${!!m}) texture(${!!v})`);return}const E=r.getAttribLocation(d,"vertexPos"),Y=r.getAttribLocation(d,"vertexColor"),re=r.getUniformLocation(d,"modelMat"),te=r.getUniformLocation(d,"projViewMat"),z=r.getUniformLocation(d,"uId");if(!z||!Y||!re||!te){x(`Error with pick shader ${E} ${Y} ${z}`);return}const P=de(r,s,c,h,u),b=de(r,s,c,E,Y);if(!b){x("VAO couldnt be created");return}if(!P){x("VAO couldnt be created");return}const S=F(0,1,0),ne=X(),ie=X(),G=X(),B=30,I=[new g(1,"Sun",.004,S,0,F(1,1,.3),P,b,n.length,1,0,1,0,0),new g(2,"Mercury",.003,S,0,F(.7,.7,.8),P,b,n.length,.20563,.387098*B,88/C,_(48.331),_(3.38)),new g(3,"Venus",.003,S,0,F(.7,.55,.4),P,b,n.length,.006772,.723332*B,224.701/C,_(76.68),_(3.86)),new g(4,"Earth",.003,S,0,F(.3,.3,.7),P,b,n.length,.016708,1*B,365.25638/C,_(-11.26064),_(0)),new g(5,"Mars",.003,S,0,F(.7,.23,.23),P,b,n.length,.0934,1.523679*B,686.971/C,_(49.558),_(0)),new g(6,"Jupiter",.005,S,0,F(.92,.77,47),P,b,n.length,.0489,5.2044*B,4332.59/C,_(100.464),_(0)),new g(7,"Saturn",.005,S,0,F(1,.94,.82),P,b,n.length,.0565,9.5826*B,10759.22/C,_(113.665),_(0)),new g(8,"Uranus",.005,S,0,F(.58,1,1),P,b,n.length,.046381,19.2184*B,30688.5/C,_(74.006),_(0)),new g(9,"Neptune",.005,S,0,F(.33,.37,.91),P,b,n.length,.009456,30.110388*B,60182/C,_(131.784),_(0))],oe=ze("https://data.nasa.gov/resource/b67r-rgxc.json");if(!oe){x("Couldnt get JSON data");return}const V=JSON.parse(oe),ae=[];for(let p=0;p<V.length;p++){const L={object:V[p].object,semiMajorAxis:(parseFloat(V[p].q_au_1)+parseFloat(V[p].q_au_2))/2,eccentricity:parseFloat(V[p].e),inclination:parseFloat(V[p].i_deg),longitudeAscendingNode:parseFloat(V[p].node_deg),period:parseFloat(V[p].p_yr)};ae.push(L)}ae.map(p=>I.push(new g(I.length+1,p.object,.002,S,0,F(.7,.7,.7),P,b,n.length,p.eccentricity,p.semiMajorAxis*B,p.period,p.longitudeAscendingNode,p.inclination)));const $=r.createTexture();r.bindTexture(r.TEXTURE_2D,$),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);const j=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,j);function Te(p,L){if(!r)return;r.bindTexture(r.TEXTURE_2D,$);const H=0,N=r.RGBA,Me=0,xe=r.RGBA,Re=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,H,N,p,L,Me,xe,Re,null),r.bindRenderbuffer(r.RENDERBUFFER,j),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,p,L)}const se=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,se);const Ae=r.COLOR_ATTACHMENT0;r.framebufferTexture2D(r.FRAMEBUFFER,Ae,r.TEXTURE_2D,$,0),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,j),Te(e.width,e.height);let ce=performance.now();const le=function(){const p=performance.now(),L=(p-ce)/1e3;ce=p,Z+=L/10,Se(ne,F(Math.sin(Z)*D,200,Math.cos(Z)*D),F(0,0,0),F(0,1,0)),we(ie,_(80),e.width/e.height,.1,1e4),e.width=e.clientWidth*devicePixelRatio,e.height=e.clientHeight*devicePixelRatio,ye(G,ie,ne),r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT),r.clearColor(.05,.06,.08,1),r.bindFramebuffer(r.FRAMEBUFFER,se),r.viewport(0,0,e.width,e.height),r.useProgram(d),r.enable(r.CULL_FACE),r.enable(r.DEPTH_TEST),r.uniformMatrix4fv(te,!1,G),I.forEach(N=>N.pickDraw(r,re,z)),me=K*e.width/e.clientWidth,ve=he*e.height/e.clientHeight-1;const H=new Uint8Array(4);r.readPixels(me,ve,1,1,r.RGBA,r.UNSIGNED_BYTE,H),r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT),r.clearColor(.05,.06,.08,1),r.viewport(0,0,e.width,e.height),r.useProgram(f),r.uniformMatrix4fv(A,!1,G),r.bindFramebuffer(r.FRAMEBUFFER,null),I.forEach(N=>N.draw(r,L,R,M)),requestAnimationFrame(le)};requestAnimationFrame(le)}try{Ke()}catch(e){x(`Error: ${e}`)}
