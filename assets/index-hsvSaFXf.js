(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();var S=1e-6,R=typeof Float32Array<"u"?Float32Array:Array,K=Math.PI/180;function U(e){return e*K}Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function Z(){var e=new R(9);return R!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function b(){var e=new R(16);return R!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function J(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Q(e,r,a){var n=r[0],t=r[1],i=r[2],o=r[3],s=r[4],c=r[5],f=r[6],l=r[7],u=r[8],m=r[9],d=r[10],M=r[11],x=r[12],A=r[13],y=r[14],_=r[15],E=a[0],h=a[1],v=a[2],p=a[3];return e[0]=E*n+h*s+v*u+p*x,e[1]=E*t+h*c+v*m+p*A,e[2]=E*i+h*f+v*d+p*y,e[3]=E*o+h*l+v*M+p*_,E=a[4],h=a[5],v=a[6],p=a[7],e[4]=E*n+h*s+v*u+p*x,e[5]=E*t+h*c+v*m+p*A,e[6]=E*i+h*f+v*d+p*y,e[7]=E*o+h*l+v*M+p*_,E=a[8],h=a[9],v=a[10],p=a[11],e[8]=E*n+h*s+v*u+p*x,e[9]=E*t+h*c+v*m+p*A,e[10]=E*i+h*f+v*d+p*y,e[11]=E*o+h*l+v*M+p*_,E=a[12],h=a[13],v=a[14],p=a[15],e[12]=E*n+h*s+v*u+p*x,e[13]=E*t+h*c+v*m+p*A,e[14]=E*i+h*f+v*d+p*y,e[15]=E*o+h*l+v*M+p*_,e}function k(e,r,a,n){var t=r[0],i=r[1],o=r[2],s=r[3],c=t+t,f=i+i,l=o+o,u=t*c,m=t*f,d=t*l,M=i*f,x=i*l,A=o*l,y=s*c,_=s*f,E=s*l,h=n[0],v=n[1],p=n[2];return e[0]=(1-(M+A))*h,e[1]=(m+E)*h,e[2]=(d-_)*h,e[3]=0,e[4]=(m-E)*v,e[5]=(1-(u+A))*v,e[6]=(x+y)*v,e[7]=0,e[8]=(d+_)*p,e[9]=(x-y)*p,e[10]=(1-(u+M))*p,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function ee(e,r,a,n,t){var i=1/Math.tan(r/2),o;return e[0]=i/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,t!=null&&t!==1/0?(o=1/(n-t),e[10]=(t+n)*o,e[14]=2*t*n*o):(e[10]=-1,e[14]=-2*n),e}var re=ee;function te(e,r,a,n){var t,i,o,s,c,f,l,u,m,d,M=r[0],x=r[1],A=r[2],y=n[0],_=n[1],E=n[2],h=a[0],v=a[1],p=a[2];return Math.abs(M-h)<S&&Math.abs(x-v)<S&&Math.abs(A-p)<S?J(e):(l=M-h,u=x-v,m=A-p,d=1/Math.hypot(l,u,m),l*=d,u*=d,m*=d,t=_*m-E*u,i=E*l-y*m,o=y*u-_*l,d=Math.hypot(t,i,o),d?(d=1/d,t*=d,i*=d,o*=d):(t=0,i=0,o=0),s=u*o-m*i,c=m*t-l*o,f=l*i-u*t,d=Math.hypot(s,c,f),d?(d=1/d,s*=d,c*=d,f*=d):(s=0,c=0,f=0),e[0]=t,e[1]=s,e[2]=l,e[3]=0,e[4]=i,e[5]=c,e[6]=u,e[7]=0,e[8]=o,e[9]=f,e[10]=m,e[11]=0,e[12]=-(t*M+i*x+o*A),e[13]=-(s*M+c*x+f*A),e[14]=-(l*M+u*x+m*A),e[15]=1,e)}function I(){var e=new R(3);return R!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ne(e){var r=e[0],a=e[1],n=e[2];return Math.hypot(r,a,n)}function w(e,r,a){var n=new R(3);return n[0]=e,n[1]=r,n[2]=a,n}function ae(e,r,a,n){return e[0]=r,e[1]=a,e[2]=n,e}function ie(e,r){var a=r[0],n=r[1],t=r[2],i=a*a+n*n+t*t;return i>0&&(i=1/Math.sqrt(i)),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e}function oe(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function L(e,r,a){var n=r[0],t=r[1],i=r[2],o=a[0],s=a[1],c=a[2];return e[0]=t*c-i*s,e[1]=i*o-n*c,e[2]=n*s-t*o,e}var se=ne;(function(){var e=I();return function(r,a,n,t,i,o){var s,c;for(a||(a=3),n||(n=0),t?c=Math.min(t*a+n,r.length):c=r.length,s=n;s<c;s+=a)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],i(e,e,o),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2];return r}})();function ce(){var e=new R(4);return R!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function fe(e,r){var a=r[0],n=r[1],t=r[2],i=r[3],o=a*a+n*n+t*t+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=a*o,e[1]=n*o,e[2]=t*o,e[3]=i*o,e}(function(){var e=ce();return function(r,a,n,t,i,o){var s,c;for(a||(a=4),n||(n=0),t?c=Math.min(t*a+n,r.length):c=r.length,s=n;s<c;s+=a)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],e[3]=r[s+3],i(e,e,o),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2],r[s+3]=e[3];return r}})();function B(){var e=new R(4);return R!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function G(e,r,a){a=a*.5;var n=Math.sin(a);return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=Math.cos(a),e}function V(e,r,a,n){var t=r[0],i=r[1],o=r[2],s=r[3],c=a[0],f=a[1],l=a[2],u=a[3],m,d,M,x,A;return d=t*c+i*f+o*l+s*u,d<0&&(d=-d,c=-c,f=-f,l=-l,u=-u),1-d>S?(m=Math.acos(d),M=Math.sin(m),x=Math.sin((1-n)*m)/M,A=Math.sin(n*m)/M):(x=1-n,A=n),e[0]=x*t+A*c,e[1]=x*i+A*f,e[2]=x*o+A*l,e[3]=x*s+A*u,e}function le(e,r){var a=r[0]+r[4]+r[8],n;if(a>0)n=Math.sqrt(a+1),e[3]=.5*n,n=.5/n,e[0]=(r[5]-r[7])*n,e[1]=(r[6]-r[2])*n,e[2]=(r[1]-r[3])*n;else{var t=0;r[4]>r[0]&&(t=1),r[8]>r[t*3+t]&&(t=2);var i=(t+1)%3,o=(t+2)%3;n=Math.sqrt(r[t*3+t]-r[i*3+i]-r[o*3+o]+1),e[t]=.5*n,n=.5/n,e[3]=(r[i*3+o]-r[o*3+i])*n,e[i]=(r[i*3+t]+r[t*3+i])*n,e[o]=(r[o*3+t]+r[t*3+o])*n}return e}var j=fe;(function(){var e=I(),r=w(1,0,0),a=w(0,1,0);return function(n,t,i){var o=oe(t,i);return o<-.999999?(L(e,r,t),se(e)<1e-6&&L(e,a,t),ie(e,e),G(n,e,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(L(e,t,i),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+o,j(n,n))}})();(function(){var e=B(),r=B();return function(a,n,t,i,o,s){return V(e,n,o,s),V(r,t,i,s),V(a,e,r,2*s*(1-s)),a}})();(function(){var e=Z();return function(r,a,n,t){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=t[0],e[4]=t[1],e[7]=t[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],j(r,le(r,e))}})();function T(e){console.error(e);const r=document.getElementById("error-box");if(!r)return;const a=document.createElement("p");a.innerText=e,r.append(a)}function he(e,r){const a=e.createBuffer();if(!a){T("Couldn't allocate buffer");return}return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),a}function de(e,r){const a=e.createBuffer();return a||T("Couldn't allocate buffer"),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),a}function g(e,r,a){const n=e.createShader(e.VERTEX_SHADER),t=e.createShader(e.FRAGMENT_SHADER),i=e.createProgram();if(n===null)return T("Memory for vertex shader couldn't be allocated"),null;if(t===null)return T("Memory for fragment shader couldn't be allocated"),null;if(i===null)return T("Memory for shader program couldn't be allocated"),null;if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const o=e.getShaderInfoLog(n);T(`${o}`)}if(e.shaderSource(t,a),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS)){const o=e.getShaderInfoLog(t);T(`${o}`)}if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const o=e.getProgramInfoLog(i);return T(`Failed to link program: ${o}`),null}return i}function ve(e,r){const a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const n=0,t=e.RGBA,i=1,o=1,s=0,c=e.RGBA,f=e.UNSIGNED_BYTE,l=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,n,t,i,o,s,c,f,l);const u=new Image;return u.onload=()=>{e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,n,t,c,f,u),Y(u.width)&&Y(u.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},u.src=r,a}function Y(e){return(e&e-1)===0}function ue(e){const r=new XMLHttpRequest,a=[],n=[];r.open("GET",e,!1),r.send(null);const t=r.status===200?r.responseText:null;if(!t)return null;const i=t.split(`
`);for(let o=0;o<i.length;o++){if(i[o][0]=="v"){const s=i[o].slice(2).split(" "),c=[];s.forEach(f=>c.push(parseFloat(f))),a.push(c[0],c[1],c[2],c[0],c[1],c[2])}i[o][0]=="f"&&i[o].slice(2).split(" ").forEach(c=>n.push(parseInt(c)-1))}return[new Float32Array(a),new Uint16Array(n)]}function me(e){const r=new XMLHttpRequest,a=[],n=[];r.open("GET",e,!1),r.send(null);const t=r.status===200?r.responseText:null;if(!t)return null;const i=[],o=[],s=t.split(`
`);for(let c=0;c<s.length;c++){if(s[c][0]=="v"&&s[c][0]!="t"){const f=s[c].slice(2).split(" ");i.push(f.map(l=>parseFloat(l)))}if(s[c][0]=="v"&&s[c][1]=="t"){const f=s[c].slice(3).split(" ");o.push(f.map(l=>parseFloat(l)))}if(s[c][0]=="f"){const f=s[c].slice(2).split(" "),l=parseFloat(f[0].split("/")[0])-1,u=parseFloat(f[1].split("/")[0])-1,m=parseFloat(f[2].split("/")[0])-1;n.push(l,u,m),a.push(...i[l],...o[l]),a.push(...i[u],...o[u]),a.push(...i[m],...o[m])}}return[new Float32Array(a),new Uint16Array(n)]}function pe(e,r,a,n,t){const i=e.createVertexArray();return i?(e.bindVertexArray(i),e.enableVertexAttribArray(n),e.enableVertexAttribArray(t),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(n,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(t,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),i):(T("Failed to create 3d POS COL Vao"),null)}const Ee=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec3 vertexColor;
out vec3 fragmentColor;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentColor = vertexColor;

    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}
`,xe=`#version 300 es
precision mediump float;

in vec3 fragmentColor;
out vec4 oColor;

void main() {
    oColor = vec4(0.8, 0.8, 0.8, 1.0);
}
`,Ae=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec2 vertexUV;
out vec2 fragmentUV;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentUV = vertexUV;

    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}
`,Me=`#version 300 es
precision mediump float;

uniform sampler2D oTexture;

in vec2 fragmentUV;
out vec4 oColor;

void main() {
    oColor = texture(oTexture, fragmentUV);
}
`,X=1,$=.3;class F{constructor(r,a,n,t,i,o,s,c,f){this.scale=r,this.rotationAxis=a,this.rotationAngle=n,this.vao=t,this.numIndices=i,this.eccentricity=o,this.semiMajorAxis=s,this.period=c,this.angleOffset=f,this.modelMat=b(),this.scaleVec=I(),this.rotation=B(),this.semiMinorAxis=s*Math.sqrt(1-o*o),this.focusDistance=s*o,this.centerX=this.focusDistance/2,this.centerY=this.focusDistance/2}draw(r,a,n){this.rotationAngle+=a/5,G(this.rotation,this.rotationAxis,this.rotationAngle),ae(this.scaleVec,this.scale,this.scale,this.scale);let t=this.centerX+this.semiMajorAxis*Math.cos(performance.now()*X/this.period),i=this.centerY+this.semiMinorAxis*Math.sin(performance.now()*X/this.period),o=$*(t*Math.cos(this.angleOffset)+i*Math.sin(this.angleOffset)),s=0,c=$*(i*Math.cos(this.angleOffset)-t*Math.sin(this.angleOffset));k(this.modelMat,this.rotation,w(o,s,c),this.scaleVec),r.uniformMatrix4fv(n,!1,this.modelMat),r.bindVertexArray(this.vao),r.drawElements(r.TRIANGLES,this.numIndices,r.UNSIGNED_SHORT,0),r.bindVertexArray(null)}}function Te(){const e=document.getElementById("canvas");if(!e||!(e instanceof HTMLCanvasElement)){T("Invalid canvas");return}const r=e.getContext("webgl2");if(!r){T("Couldnt get access webgl2");return}const a=ue("/sol.obj");if(!a)return;const[n,t]=a;if(!me("./sol.obj"))return;if(!ve(r,"/sun.png")){T("Sun texture couldnt be loaded");return}r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.bindTexture(r.TEXTURE_2D,null);const s=he(r,n),c=de(r,t);if(!c||!s){T("Sphere indices or Sphere vertices couldnt be made");return}const f=g(r,Ee,xe);if(!f){T("Program");return}const l=g(r,Ae,Me);if(!l){T("Program");return}const u=r.getAttribLocation(f,"vertexPos"),m=r.getAttribLocation(f,"vertexColor"),d=r.getUniformLocation(f,"modelMat"),M=r.getUniformLocation(f,"projViewMat");if(u<0||m<0||!d||!M){T("Error loading Pos Color attributes");return}const x=r.getAttribLocation(l,"vertexPos"),A=r.getAttribLocation(l,"vertexUV"),y=r.getUniformLocation(l,"modelMat"),_=r.getUniformLocation(l,"projViewMat"),E=r.getUniformLocation(l,"oTexture");if(x<0||A<0||!y||!_||!E){T(`Error loading Pos UV attributes: pos(${x}) uv(${A}) modelMat(${!!y}) projViewMat(${!!_}) texture(${!!E})`);return}const h=pe(r,s,c,u,m);if(!h){T("VAO couldnt be created");return}const v=w(0,1,0),p=b(),C=b(),D=b(),P=30,q=[new F(.004,v,0,h,t.length,1,0,1,0),new F(.003,v,0,h,t.length,.20563,.387098*P,88,U(48.331)),new F(.003,v,0,h,t.length,.006772,.723332*P,224.701,U(76.68)),new F(.003,v,0,h,t.length,.016708,1*P,365.25638,U(-11.26064)),new F(.003,v,0,h,t.length,.0934,1.523679*P,686.971,U(49.558)),new F(.005,v,0,h,t.length,.0489,5.2044*P,4332.59,U(100.464)),new F(.005,v,0,h,t.length,.0565,9.5826*P,10759.22,U(113.665)),new F(.005,v,0,h,t.length,.046381,19.2184*P,30688.5,U(74.006)),new F(.005,v,0,h,t.length,.009456,30.110388*P,60182,U(131.784))];let O=performance.now();const z=function(){const N=performance.now(),H=(N-O)/1e3;O=N,te(p,w(0,300,0),w(0,0,0),w(1,0,0)),re(C,U(80),e.width/e.height,.1,1e4),e.width=e.clientWidth*devicePixelRatio,e.height=e.clientHeight*devicePixelRatio,r.clearColor(.05,.06,.08,1),r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT),r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),r.viewport(0,0,e.width,e.height),r.useProgram(f),Q(D,C,p),r.uniformMatrix4fv(M,!1,D),q.forEach(W=>W.draw(r,H,d)),requestAnimationFrame(z)};requestAnimationFrame(z)}try{Te()}catch(e){T(`Error: ${e}`)}
