(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();var L=1e-6,_=typeof Float32Array<"u"?Float32Array:Array,X=Math.PI/180;function w(r){return r*X}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function q(){var r=new _(9);return _!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function P(){var r=new _(16);return _!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function G(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function W(r,e,a){var n=e[0],t=e[1],i=e[2],o=e[3],c=e[4],f=e[5],y=e[6],A=e[7],l=e[8],E=e[9],s=e[10],p=e[11],u=e[12],M=e[13],x=e[14],R=e[15],d=a[0],v=a[1],h=a[2],m=a[3];return r[0]=d*n+v*c+h*l+m*u,r[1]=d*t+v*f+h*E+m*M,r[2]=d*i+v*y+h*s+m*x,r[3]=d*o+v*A+h*p+m*R,d=a[4],v=a[5],h=a[6],m=a[7],r[4]=d*n+v*c+h*l+m*u,r[5]=d*t+v*f+h*E+m*M,r[6]=d*i+v*y+h*s+m*x,r[7]=d*o+v*A+h*p+m*R,d=a[8],v=a[9],h=a[10],m=a[11],r[8]=d*n+v*c+h*l+m*u,r[9]=d*t+v*f+h*E+m*M,r[10]=d*i+v*y+h*s+m*x,r[11]=d*o+v*A+h*p+m*R,d=a[12],v=a[13],h=a[14],m=a[15],r[12]=d*n+v*c+h*l+m*u,r[13]=d*t+v*f+h*E+m*M,r[14]=d*i+v*y+h*s+m*x,r[15]=d*o+v*A+h*p+m*R,r}function K(r,e,a,n){var t=e[0],i=e[1],o=e[2],c=e[3],f=t+t,y=i+i,A=o+o,l=t*f,E=t*y,s=t*A,p=i*y,u=i*A,M=o*A,x=c*f,R=c*y,d=c*A,v=n[0],h=n[1],m=n[2];return r[0]=(1-(p+M))*v,r[1]=(E+d)*v,r[2]=(s-R)*v,r[3]=0,r[4]=(E-d)*h,r[5]=(1-(l+M))*h,r[6]=(u+x)*h,r[7]=0,r[8]=(s+R)*m,r[9]=(u-x)*m,r[10]=(1-(l+p))*m,r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r}function Z(r,e,a,n,t){var i=1/Math.tan(e/2),o;return r[0]=i/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,t!=null&&t!==1/0?(o=1/(n-t),r[10]=(t+n)*o,r[14]=2*t*n*o):(r[10]=-1,r[14]=-2*n),r}var j=Z;function J(r,e,a,n){var t,i,o,c,f,y,A,l,E,s,p=e[0],u=e[1],M=e[2],x=n[0],R=n[1],d=n[2],v=a[0],h=a[1],m=a[2];return Math.abs(p-v)<L&&Math.abs(u-h)<L&&Math.abs(M-m)<L?G(r):(A=p-v,l=u-h,E=M-m,s=1/Math.hypot(A,l,E),A*=s,l*=s,E*=s,t=R*E-d*l,i=d*A-x*E,o=x*l-R*A,s=Math.hypot(t,i,o),s?(s=1/s,t*=s,i*=s,o*=s):(t=0,i=0,o=0),c=l*o-E*i,f=E*t-A*o,y=A*i-l*t,s=Math.hypot(c,f,y),s?(s=1/s,c*=s,f*=s,y*=s):(c=0,f=0,y=0),r[0]=t,r[1]=c,r[2]=A,r[3]=0,r[4]=i,r[5]=f,r[6]=l,r[7]=0,r[8]=o,r[9]=y,r[10]=E,r[11]=0,r[12]=-(t*p+i*u+o*M),r[13]=-(c*p+f*u+y*M),r[14]=-(A*p+l*u+E*M),r[15]=1,r)}function I(){var r=new _(3);return _!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Q(r){var e=r[0],a=r[1],n=r[2];return Math.hypot(e,a,n)}function T(r,e,a){var n=new _(3);return n[0]=r,n[1]=e,n[2]=a,n}function k(r,e,a,n){return r[0]=e,r[1]=a,r[2]=n,r}function rr(r,e){var a=e[0],n=e[1],t=e[2],i=a*a+n*n+t*t;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r}function er(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function B(r,e,a){var n=e[0],t=e[1],i=e[2],o=a[0],c=a[1],f=a[2];return r[0]=t*f-i*c,r[1]=i*o-n*f,r[2]=n*c-t*o,r}var nr=Q;(function(){var r=I();return function(e,a,n,t,i,o){var c,f;for(a||(a=3),n||(n=0),t?f=Math.min(t*a+n,e.length):f=e.length,c=n;c<f;c+=a)r[0]=e[c],r[1]=e[c+1],r[2]=e[c+2],i(r,r,o),e[c]=r[0],e[c+1]=r[1],e[c+2]=r[2];return e}})();function tr(){var r=new _(4);return _!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function ar(r,e){var a=e[0],n=e[1],t=e[2],i=e[3],o=a*a+n*n+t*t+i*i;return o>0&&(o=1/Math.sqrt(o)),r[0]=a*o,r[1]=n*o,r[2]=t*o,r[3]=i*o,r}(function(){var r=tr();return function(e,a,n,t,i,o){var c,f;for(a||(a=4),n||(n=0),t?f=Math.min(t*a+n,e.length):f=e.length,c=n;c<f;c+=a)r[0]=e[c],r[1]=e[c+1],r[2]=e[c+2],r[3]=e[c+3],i(r,r,o),e[c]=r[0],e[c+1]=r[1],e[c+2]=r[2],e[c+3]=r[3];return e}})();function V(){var r=new _(4);return _!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function D(r,e,a){a=a*.5;var n=Math.sin(a);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(a),r}function C(r,e,a,n){var t=e[0],i=e[1],o=e[2],c=e[3],f=a[0],y=a[1],A=a[2],l=a[3],E,s,p,u,M;return s=t*f+i*y+o*A+c*l,s<0&&(s=-s,f=-f,y=-y,A=-A,l=-l),1-s>L?(E=Math.acos(s),p=Math.sin(E),u=Math.sin((1-n)*E)/p,M=Math.sin(n*E)/p):(u=1-n,M=n),r[0]=u*t+M*f,r[1]=u*i+M*y,r[2]=u*o+M*A,r[3]=u*c+M*l,r}function ir(r,e){var a=e[0]+e[4]+e[8],n;if(a>0)n=Math.sqrt(a+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var t=0;e[4]>e[0]&&(t=1),e[8]>e[t*3+t]&&(t=2);var i=(t+1)%3,o=(t+2)%3;n=Math.sqrt(e[t*3+t]-e[i*3+i]-e[o*3+o]+1),r[t]=.5*n,n=.5/n,r[3]=(e[i*3+o]-e[o*3+i])*n,r[i]=(e[i*3+t]+e[t*3+i])*n,r[o]=(e[o*3+t]+e[t*3+o])*n}return r}var $=ar;(function(){var r=I(),e=T(1,0,0),a=T(0,1,0);return function(n,t,i){var o=er(t,i);return o<-.999999?(B(r,e,t),nr(r)<1e-6&&B(r,a,t),rr(r,r),D(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(B(r,t,i),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,$(n,n))}})();(function(){var r=V(),e=V();return function(a,n,t,i,o,c){return C(r,n,o,c),C(e,t,i,c),C(a,r,e,2*c*(1-c)),a}})();(function(){var r=q();return function(e,a,n,t){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=t[0],r[4]=t[1],r[7]=t[2],r[2]=-a[0],r[5]=-a[1],r[8]=-a[2],$(e,ir(e,r))}})();function F(r){console.error(r);const e=document.getElementById("error-box");if(e===null)return;const a=document.createElement("p");a.innerText=r,e.appendChild(a)}function U(r,e){const a=r.createBuffer();if(!a)throw new Error("Couldn't allocate buffer");return r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),a}function z(r,e){const a=r.createBuffer();if(!a)throw new Error("Couldn't allocate buffer");return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),a}function or(r,e,a){const n=r.createShader(r.VERTEX_SHADER),t=r.createShader(r.FRAGMENT_SHADER),i=r.createProgram();if(n===null)return F("Memory for vertex shader couldn't be allocated"),null;if(t===null)return F("Memory for fragment shader couldn't be allocated"),null;if(i===null)return F("Memory for shader program couldn't be allocated"),null;if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const o=r.getShaderInfoLog(n);F(`${o}`)}if(r.shaderSource(t,a),r.compileShader(t),!r.getShaderParameter(t,r.COMPILE_STATUS)){const o=r.getShaderInfoLog(t);throw new Error(`${o}`)}if(r.attachShader(i,n),r.attachShader(i,t),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){const o=r.getProgramInfoLog(i);return F(`Failed to link program: ${o}`),null}return i}const cr=new Float32Array([-1,-1,1,1,0,0,1,-1,1,1,0,0,1,1,1,1,0,0,-1,1,1,1,0,0,-1,-1,-1,1,0,0,-1,1,-1,1,0,0,1,1,-1,1,0,0,1,-1,-1,1,0,0,-1,1,-1,0,1,0,-1,1,1,0,1,0,1,1,1,0,1,0,1,1,-1,0,1,0,-1,-1,-1,0,1,0,1,-1,-1,0,1,0,1,-1,1,0,1,0,-1,-1,1,0,1,0,1,-1,-1,0,0,1,1,1,-1,0,0,1,1,1,1,0,0,1,1,-1,1,0,0,1,-1,-1,-1,0,0,1,-1,-1,1,0,0,1,-1,1,1,0,0,1,-1,1,-1,0,0,1]),S=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),sr=new Float32Array([-10,0,-10,.2,.2,.2,-10,0,10,.2,.2,.2,10,0,10,.2,.2,.2,10,0,-10,.2,.2,.2]),O=new Uint16Array([0,1,2,0,2,3]);function N(r,e,a,n,t){const i=r.createVertexArray();return i?(r.bindVertexArray(i),r.enableVertexAttribArray(n),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,e),r.vertexAttribPointer(n,3,r.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),r.vertexAttribPointer(t,3,r.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.bindVertexArray(null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),i):(F("Failed to create 3d POS COL Vao"),null)}F("Test error - Ignore this line.");const fr=`#version 300 es
precision mediump float;

in vec3 vertexPos;
in vec3 vertexColor;
out vec3 fragmentColor;

uniform mat4 modelMat;
uniform mat4 projViewMat;

void main() {
    fragmentColor = vertexColor;
    

    gl_Position = projViewMat * modelMat * vec4(vertexPos, 1.0);
}`,lr=`#version 300 es
precision mediump float;

in vec3 fragmentColor;
out vec4 oColor;

void main() {
    oColor = vec4(fragmentColor, 1.0);
}`;class b{constructor(e,a,n,t,i,o){this.pos=e,this.scale=a,this.rotationAxis=n,this.rotationAngle=t,this.vao=i,this.numIndices=o,this.modelMat=P(),this.scaleVec=I(),this.rotation=V()}draw(e,a){D(this.rotation,this.rotationAxis,this.rotationAngle),k(this.scaleVec,this.scale,this.scale,this.scale),K(this.modelMat,this.rotation,this.pos,this.scaleVec),e.uniformMatrix4fv(a,!1,this.modelMat),e.bindVertexArray(this.vao),e.drawElements(e.TRIANGLES,this.numIndices,e.UNSIGNED_SHORT,0),e.bindVertexArray(null)}}function vr(){const r=document.getElementById("demo-canvas");if(!r||!(r instanceof HTMLCanvasElement)){F("Invalid canvas or canvas doesn't exist");return}const e=r.getContext("webgl2");if(!e){F("Couldn't access WebGL 2 Context");return}const a=U(e,cr),n=z(e,S),t=U(e,sr),i=z(e,O);(!a||!n||!t||!i)&&F(`Failed to create geometry buffer: cube(v=${!!a}, i=${!!n}) floor(v=${!!t}, i=${!!i})`);const o=or(e,fr,lr);if(!o){F("Failed to create WebGL program");return}const c=e.getAttribLocation(o,"vertexPos"),f=e.getAttribLocation(o,"vertexColor"),y=e.getUniformLocation(o,"modelMat"),A=e.getUniformLocation(o,"projViewMat");if(c<0||f<0||!y||!A){F("Failed to access attrib or uniform location");return}const l=N(e,a,n,c,f),E=N(e,t,i,c,f);if(!l||!E){F(`Failed to create VAO(s): cube(${!!l}) floor(${E})`);return}const s=T(0,1,0),p=[new b(T(0,0,0),1,s,0,E,O.length),new b(T(0,1,-2),1,s,0,l,S.length),new b(T(5,.4,0),.4,s,w(45),l,S.length),new b(T(-2,.5,3),.5,s,w(15),l,S.length),new b(T(3,.3,2),.3,s,w(20),l,S.length)],u=P(),M=P(),x=P();let R=0,d=performance.now();const v=function(){const h=performance.now(),m=(h-d)/1e3;d=h,R+=m*w(10);const Y=7*Math.sin(R),g=7*Math.cos(R);J(u,T(Y,5,g),T(0,0,0),T(0,1,0)),j(M,w(80),r.width/r.height,.1,100),r.width=r.clientWidth*devicePixelRatio,r.height=r.clientHeight*devicePixelRatio,e.clearColor(.05,.06,.08,1),e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.viewport(0,0,r.width,r.height),e.useProgram(o),W(x,M,u),e.uniformMatrix4fv(A,!1,x),p.forEach(H=>H.draw(e,y)),requestAnimationFrame(v)};requestAnimationFrame(v)}try{vr()}catch(r){F(`ERROR: ${r}`)}
